rabbitmq:
    enabled: true
    image:
        registry: docker.io
        repository: bitnami/rabbitmq
        tag: 3.11.16-debian-11-r0
        pullPolicy: IfNotPresent
    nameOverride: rabbitmq
    fullnameOverride: rabbitmq
    auth:
        username: ENC[AES256_GCM,data:r2xQ4kc=,iv:+97aRD/gOcgbCQwh5GQ6/Fug5qcUNneNH82rsSPoMrM=,tag:+z2s5MStpYPBgrSTgbjTvQ==,type:str]
        password: ENC[AES256_GCM,data:M/A1y3WcEBo=,iv:Y9t62Y9WHQtZkHA86Cs8/t9BVBUsImzn+JX1cqcZnNA=,tag:ZBKa2ZNgDTwZfMz9si2i6Q==,type:str]
        erlangCookie: pp7PLJYGMA7h732Kdne
    loadDefinition:
        enabled: true
        file: /app/load_definition.json
        existingSecret: load-definition
    extraConfiguration: |
        load_definitions = /app/load_definition.json
    extraSecrets:
        load-definition:
            load_definition.json: |
                {
                  "users": [
                    {
                      "name": "{{ .Values.auth.username }}",
                      "password": "{{ .Values.auth.password }}",
                      "tags": "administrator"
                    }
                  ],
                  "vhosts": [
                    {
                      "name": "/"
                    }
                  ],
                  "permissions": [
                    {
                      "user": "{{ .Values.auth.username }}",
                      "vhost": "/",
                      "configure": ".*",
                      "write": ".*",
                      "read": ".*"
                    }
                  ],
                  "policies":[
                    {
                      "vhost": "/",
                      "name":"ha",
                      "pattern":".*",
                      "definition":{"ha-mode":"all","ha-sync-mode":"automatic","ha-sync-batch-size":5}
                    }
                  ]
                }
    replicaCount: 3
    clustering:
        forceBoot: true
    pdb:
        create: false
        minAvailable: 1
    persistence:
        enabled: true
        size: 2Gi
    metrics:
        enabled: true
        serviceMonitor:
            enabled: true
            path: /metrics/per-object
sops:
    kms:
        - arn: arn:aws:kms:eu-west-1:968199160813:key/36954c37-c94a-4d58-b09c-657df7822c99
          created_at: "2024-01-18T20:05:52Z"
          enc: AQICAHhWcDMr8oH+BqA/jX/be/kNo+OjSJkYiwegqivVVeYjpgGuW0aS39VTZiOL+Mugh4LTAAAAfjB8BgkqhkiG9w0BBwagbzBtAgEAMGgGCSqGSIb3DQEHATAeBglghkgBZQMEAS4wEQQMHwpqhbLBCoiGWYHKAgEQgDv8s/Q1VI78mbO9J3dFhHanaAhit/JX0kxnZNAe0JGtJixwU5kpO8rlTDP8psd5GKDj0Ruc+PvY8GgjeQ==
          aws_profile: ""
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age: []
    lastmodified: "2024-01-18T20:05:53Z"
    mac: ENC[AES256_GCM,data:8cpLhWrPNKAYlb3s7+eqwwijG+l9DDvvGTCdoU8URRMGeSm9Hj60Eac/5UEZo2kbaWFJsjPsTZQc/P+DSmddYFwh5+oP1JZkx4pcqZcfgE8I2V3phA0B+4sxy3zT+h2rJkXzwzEcR/H6kYNFl36zGcHhhLduQCwXHoMzcyHy884=,iv:PobZhiJWCcws8cUVzIcCSYgjgcCJJXO/Thk2k7VXjFs=,tag:JxSArk2MxhjfSeHM0frmnw==,type:str]
    pgp: []
    encrypted_regex: ^(username|password)$
    version: 3.8.1
